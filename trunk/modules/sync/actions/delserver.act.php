<?

	require_once($kapenta->installPath . 'modules/sync/models/server.mod.php');

//--------------------------------------------------------------------------------------------------
//*	delete an awareNet server record given its UID
//--------------------------------------------------------------------------------------------------

	//----------------------------------------------------------------------------------------------
	//	check arguments and permissions
	//----------------------------------------------------------------------------------------------
	if ('admin' != $user->role) { $page->do403(); }					
	if ('' == $req->ref) { $page->do404(); }
	
	$model = new Sync_Server($req->ref);
	if (false == $model->loaded) { $page->do404(); }

	//----------------------------------------------------------------------------------------------
	//	delete the server
	//----------------------------------------------------------------------------------------------
	$model->delete();
	$session->msg('Deleted server record ' . $model->servername);
	$page->do302('sync/listservers/');

?>
